<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carga Masiva</title>

    <!-- Bootstrap CSS Link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS file -->
    <link href="/css/generales.css" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="/resources/favicon.ico">
</head>
<body class="d-flex flex-column">

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/"><b>MESTRAPEST</b></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav nav-pills">
                <li class="nav-item">
                    <a class="nav-link" href="/">Inicio</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownIncidentes" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Incidentes
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownIncidentes">
                        <a class="dropdown-item" href="/incidentes">Listado</a>
                        <a class="dropdown-item" href="/aperturaIncidente">Apertura</a>
                        <a class="dropdown-item" href="/cierreIncidente">Cierre</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdownEntidades" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Entidades
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownEntidades">
                        <a class="dropdown-item" href="/rankings">Rankings</a>
                        <a class="dropdown-item" href="/cargaMasiva">Carga masiva</a>
                        <a class="dropdown-item" href="/entidadesPrestadoras">Administracion</a>
                    </div>
                </li>
                {{#with adminPlataforma}}
                    <li class="nav-item">
                        <a class="nav-link" href="/usuarios">Usuarios</a>
                    </li>
                {{/with}}
            </ul>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownSesion" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Mi sesión
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownSesion">
                        <a class="dropdown-item" href="/usuarios/{{userActual.id}}/edit">Mi perfil</a>
                        <a class="dropdown-item" href="/logout">Cerrar sesión</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container mt-4 altura-minima">
    <div class="row justify-content-center mt-3 mb-3">
        <div class="col-md-6">
            {{#with success}}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{caso}}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {{/with}}
            <div class="card">
                <div class="card-header">
                    Carga masiva de Entidades Prestadoras y Organismos de Control
                </div>
                <div class="card-body">
                    <form enctype="multipart/form-data" action="#" method="POST">
                        <div class="mb-3">
                            <label for="file" class="form-label">Seleccionar archivo CSV con el formato correspondiente</label>
                            <input type="file" class="form-control" id="file" name="file" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Cargar archivo</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h3 class="mt-3">Ejemplo de archivo</h3>
            <p class="mt-3">Debe ser archivo <b>.csv</b> y seguir el siguiente formato, teniendo en cuenta que la columna "ENTIDADES_RELACIONADAS" hace referencia a los IDs que se le asigna en el mismo archivo a las entidades sobre las que tiene control (Establecimientos, Entidades, Entidades Prestadoras u Organismos de Control).</p>
            <p class="mt-3">IMPORTANTE: la columna ID es de relación y validez únicamente dentro del archivo csv. Es decir, no se asegura que esos IDs sean los asignados a la entidad cargada finalmente en MESTRAPEST.</p>
            <div class="row text-center mt-4">
                <div class="col">
                    <div class="bg-dark text-white rounded rounded-4 text-left" style="padding: 15px; display: inline-block"><pre><code>
TIPO,ID,NOMBRE,DENOMINACION,ENTIDADES_RELACIONADAS
Control,1,CNRT,"","2,3"
Prestador,2,Trenes Argentinos, "","4"
Entidad,4,Línea Mitre,Linea de Tren,"7"
Prestador,3,Subterráneos de Buenos Aires,"","5,6"
Entidad,5,Línea B,Linea de Subte,"8,9"
Entidad,6,Línea C,Linea de Subte,"10,11"
Establecimiento,7,Estación Colegiales,Estación de Tren,""
Establecimiento,8,Estación Medrano,Estación de Subte,""
Establecimiento,9,Estación Pellegrini,Estación de Subte,""
Establecimiento,10,Estación Retiro,Estación de Subte,""
Establecimiento,11,Estación Constitución,Estación de Subte,""</code></pre></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="bg-secondary text-white text-center py-3">
    <div class="container">
        2023 Grupo 19 - UTN FRBA, DDS Miércoles Noche.
    </div>
</footer>

<!-- Bootstrap JavaScript y Popper.js Links -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>

</body>
</html>
